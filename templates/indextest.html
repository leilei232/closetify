<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Outfit Builder</title>
 <link rel="stylesheet" href="/static/nicepage.css" media="screen"> 
<link rel="stylesheet" href="/static/builder.css" media="screen">
    <script class="u-script" type="text/javascript" src="/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/static/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 7.6.10, nicepage.com">
    <style>
      .modal {
        font-family: "Aoboshi One";
         display: none; 
         position: fixed; 
         top: 50%; left: 50%; transform: translate(-50%, -50%); 
         background: #4d4d4d; 
         padding: 20px; border-radius:10px; 
        box-shadow: 0px 0px 10px
           rgba(0,0,0,0.3); z-index: 1000; }
      .modal-content {
         text-align: center; 
        }
      .modal button { 
        background-color: #323c2c;
         margin: 10px; 
         padding: 10px 20px;
         border-radius:10px; 
         border: 0px;
         cursor: pointer;
         }
         
      
  </style>
    
    
    
    
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Aoboshi+One:400|Bakbak+One:400">
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1"
}</script>
<script type="module" src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js"></script>
<script type="module" src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js"></script>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Page 1">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
  <body  style="height: 100%; margin: 0; padding: 0; background-color: #454b42;" data-path-to-root="./" data-include-products="true" class="u-body u-xl-mode" data-lang="en">
    <section class="u-clearfix u-custom-color-8 u-section-1" id="sec-52ca">
      <div class="u-clearfix u-sheet u-valign-bottom-lg u-valign-bottom-md u-valign-bottom-sm u-sheet-1">
        <a href="homepage.html"><img class="u-image u-image-contain u-image-default u-image-1" src="/static/Closetifylogo2.png" alt="" data-image-width="500" data-image-height="105"></a>
        <p class="u-custom-font u-text u-text-custom-color-34 u-text-default u-text-1">OUTFIT<br>BUILDER
        </p>
      </div>
    </section>
    <section class="u-clearfix u-custom-color-9 u-section-2" id="block-5">
      <div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-sm u-valign-middle-xl u-sheet-1">
        <div class="custom-expanded u-custom-color-11 u-hidden-xs u-radius u-shape u-shape-round u-shape-1"></div>
        <div class="u-container-style u-custom-color-18 u-group u-hidden-xs u-radius u-group-1">
          <div class="u-container-layout u-container-layout-1">
            <p id="outfit-name" class="u-custom-font u-text u-text-1" onclick="renameOutfit()">OUTFIT NAME</p>
        </div>  
        <script>
          function renameOutfit() {
              let outfitName = document.getElementById("outfit-name");
              let currentName = outfitName.innerText;
              let enterPressed = false; // Flag to check if Enter was pressed
          
              // Create an input field
              let inputField = document.createElement("input");
              inputField.type = "text";
              inputField.value = currentName;
              inputField.className = "rename-input";
              inputField.maxLength = 20; // Limit characters to 20

    // Prevent typing beyond character limit
    inputField.addEventListener("input", function() {
        if (inputField.value.length > 20) {
            inputField.value = inputField.value.substring(0, 20); // Trim extra characters
        }
    });
          
              // Event: Save when Enter is pressed
              inputField.onkeydown = function(event) {
                  if (event.key === "Enter") {
                      enterPressed = true; // Set flag
                      saveName();
                  }
              };
          
              // Event: Save when focus is lost (but only if Enter wasn't pressed)
              inputField.onblur = function() {
                  if (!enterPressed) {
                      saveName();
                  }
              };
          
              function saveName() {
                  let newName = inputField.value.trim() || "OUTFIT NAME"; // Default if empty
                  let newText = document.createElement("p");
                  newText.id = "outfit-name";
                  newText.className = "u-custom-font u-text u-text-1";
                  newText.innerText = newName;
                  newText.onclick = renameOutfit;
          
                  inputField.replaceWith(newText);
              }
          
              // Replace text with input field
              outfitName.replaceWith(inputField);
              inputField.focus();
          }
          </script>
        </div>
        <div class="custom-expanded u-custom-color-18 u-radius u-shape u-shape-round u-shape-2"></div>
        <div class="custom-expanded u-container-style u-custom-color-19 u-group u-radius u-shape-round u-group-2">
          <div class="u-container-layout u-container-layout-2">
            <a  href="#"class="u-btn u-btn-round u-button-style u-custom-color-33 u-custom-font u-radius u-text-custom-color-32 u-btn-1" onclick="event.preventDefault(); showTab('shoes'); ">SHOES</a>
            <a  href="#" style="color: #182F0C;" class="u-btn u-btn-round u-button-style u-custom-color-31 u-custom-font u-radius u-text-custom-color-30 u-btn-2" onclick="event.preventDefault(); showTab('pants'); ">PANTS</a>
           <!--Canvas-->
            <div id="outfit-canvas" class="custom-expanded u-container-style u-custom-color-20 u-group u-radius u-group-3">
              <div class="u-container-layout u-container-layout-3">
                <div class="tops-section" id="selected-top">
                  <p>Top</p>
              </div>
              <div class="pants-section" id="selected-pants">
                  <p>Pants</p>
              </div>
              <div class="shoes-section" id="selected-shoes">
                  <p>Shoes</p>
              </div>

              </div>
            </div>
            <div class="u-custom-color-21 u-hidden-xs u-radius u-shape u-shape-round u-shape-3"></div>
            <a href="#" id="clear-btn"  class="u-btn u-btn-round u-button-style u-custom-color-23 u-custom-font u-hover-custom-color-22 u-radius u-text-custom-color-24 u-btn-3" onclick="event.preventDefault();">CLEAR</a>
            <a href="#" class="u-btn u-btn-round u-button-style u-custom-color-23 u-custom-font u-hover-custom-color-22 u-radius u-text-custom-color-24 u-btn-4" onclick="event.preventDefault(); showSaveOptions()">SAVE</a>
            <a href="History.html" class="u-btn u-btn-round u-button-style u-custom-color-23 u-custom-font u-hover-custom-color-22 u-radius u-text-custom-color-24 u-btn-5">HISTORY<span style="font-size: 1.125rem;"></span>
            </a>
            <div class="u-container-style u-custom-color-22 u-group u-hidden-xs u-preserve-proportions u-radius u-group-4">
              
              <div id="save-modal" class="modal" style="display:none;">
                <div class="modal-content">
                    <span style="position: absolute; top: 10px; left: 10px; cursor: pointer;" onclick="closeModal()">&times;</span>
                    <h2 style="font-family: Bakbak One;">Choose an option:</h2>
                    <button class="saveoh" onclick="saveToHistory()">Save to Outfit History</button>
                    <button class="saveoj" onclick="saveCanvas()">Save Outfit as JPEG</button>
                </div>
            </div>
              
            </div>
            <a  href="#" class="u-btn u-btn-round u-button-style u-custom-color-28 u-custom-font u-radius u-text-custom-color-27 u-btn-6"  onclick="event.preventDefault(); showTab('tops');">TOPS </a>
            <div class="u-custom-color-18 u-hidden-xs u-radius u-shape u-shape-round u-shape-4"></div>
            
            <div id="tops" class="tab-content active">
              <div class="clothing-grid">
                <div class="clothing-slot" onclick="selectItem('top', '/static/images/TOPS/tops0.png')">
                  <img src="/static/images/TOPS/tops0.png" alt="Top 0">
              </div>
                  <div class="clothing-slot" onclick="selectItem('top', '/static/images/TOPS/tops1.png')">
                      <img src="/static/images/TOPS/tops1.png" alt="Top 1">
                  </div>
                  <div class="clothing-slot" onclick="selectItem('top', '/static/images/TOPS/tops2.png')">
                      <img src="/static/images/TOPS/tops2.png" alt="Top 2">
                  </div>
                  <div class="clothing-slot" onclick="selectItem('top', '/static/images/TOPS/tops3.png')">
                    <img src="/static/images/TOPS/tops3.png" alt="Top 3">
                </div>
              </div>
                <div class="clothing-grid2">
                <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops4.png')">
                  <img src="/static/images/TOPS/tops4.png" alt="Top 4">
              </div>
              <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops5.png')">
                  <img src="/static/images/TOPS/tops5.png" alt="Top 5">
              </div>
              <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops6.png')">
                <img src="/static/images/TOPS/tops6.png" alt="Top 6">
            </div>
            <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops7.png')">
              <img src="/static/images/TOPS/tops7.png" alt="Top 7">
          </div>
          <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops8.png')">
            <img src="/static/images/TOPS/tops8.png" alt="Top 8">
        </div>
        <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops9.png')">
          <img src="/static/images/TOPS/tops9.png" alt="Top 9">
      </div>
      <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops10.png')">
        <img src="/static/images/TOPS/tops10.png" alt="Top 10">
    </div>
    <div class="clothing-slot2" onclick="selectItem('top', '/static/images/TOPS/tops11.png')">
      <img src="/static/images/TOPS/tops11.png" alt="Top 11">
  </div>
              </div>
            </div>

              <div id="pants" class="tab-content">
                <div class="clothing-grid">
                  <div class="clothing-slot" onclick="selectItem('pants', '/static/images/PANTS/pants0.png')">
                    <img src="/static/images/PANTS/pants0.png" alt="Pants 0">
                </div>
                    <div class="clothing-slot" onclick="selectItem('pants', '/static/images/PANTS/pants1.png')">
                        <img src="/static/images/PANTS/pants1.png" alt="Pants 1">
                    </div>
                    <div class="clothing-slot" onclick="selectItem('pants', '/static/images/PANTS/pants2.png')">
                        <img src="/static/images/PANTS/pants2.png" alt="Pants 2">
                    </div>
                    <div class="clothing-slot" onclick="selectItem('pants', '/static/images/PANTS/pants3.png')">
                      <img src="/static/images/PANTS/pants3.png" alt="Pants 3">
                  </div>
                </div>
                
                  <div class="clothing-grid2">
                  <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants4.png')">
                    <img src="/static/images/PANTS/pants4.png" alt="Pants 4">
                </div>
                <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants5.png')">
                    <img src="/static/images/PANTS/pants5.png" alt="Pants 5">
                </div>
                <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants6.png')">
                  <img src="/static/images/PANTS/pants6.png" alt="Pants 6">
              </div>
              <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants7.png')">
                <img src="/static/images/PANTS/pants7.png" alt="Pants 7">
            </div>
            <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants8.png')">
              <img src="/static/images/PANTS/pants8.png" alt="Pants 8">
          </div>
          <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants9.png')">
            <img src="/static/images/PANTS/pants9.png" alt="Pants 9">
        </div>
        <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants10.png')">
          <img src="/static/images/PANTS/pants10.png" alt="Pants 10">
      </div>
      <div class="clothing-slot2" onclick="selectItem('pants', '/static/images/PANTS/pants11.png')">
        <img src="/static/images/PANTS/pants11.png" alt="Pants 11">
    </div>
                </div>
              </div>
          <!-- Shoes Section -->
          <div id="shoes" class="tab-content">
            <div class="clothing-grid">
              <div class="clothing-slot" onclick="selectItem('shoes', '/static/images/SHOES/shoes0.png')">
                <img src="/static/images/SHOES/shoes0.png" alt="Shoes 0">
            </div>
                <div class="clothing-slot" onclick="selectItem('shoes', '/static/images/SHOES/shoes1.png')">
                    <img src="/static/images/SHOES/shoes1.png" alt="Shoes 1">
                </div>
                <div class="clothing-slot" onclick="selectItem('shoes', '/static/images/SHOES/shoes2.png')">
                    <img src="/static/images/SHOES/shoes2.png" alt="Shoes 2">
                </div>
                <div class="clothing-slot" onclick="selectItem('shoes', '/static/images/SHOES/shoes3.png')">
                  <img src="/static/images/SHOES/shoes3.png" alt="Shoes 3">
              </div>
            </div>
              <div class="clothing-grid2">
              <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes4.png')">
                <img src="/static/images/SHOES/shoes4.png" alt="Shoes 4">
            </div>
            <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes5.png')">
                <img src="/static/images/SHOES/shoes5.png" alt="Shoes 5">
            </div>
            <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes6.png')">
              <img src="/static/images/SHOES/shoes6.png" alt="Shoes 6">
          </div>
          <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes7.png')">
            <img src="/static/images/SHOES/shoes7.png" alt="Shoes 7">
        </div>
        <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes8.png')">
          <img src="/static/images/SHOES/shoes8.png" alt="Shoes 8">
      </div>
      <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes9.png')">
        <img src="/static/images/SHOES/shoes9.png" alt="Shoes 9">
    </div>
    <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes10.png')">
      <img src="/static/images/SHOES/shoes10.png" alt="Shoes 10">
  </div>
  <div class="clothing-slot2" onclick="selectItem('shoes', '/static/images/SHOES/shoes11.png')">
    <img src="/static/images/SHOES/shoes11.png" alt="Shoes 11">
</div>
            </div>
          </div>
      </div>
      
    </section>
    
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
      import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js";
    
      // ✅ Firebase Configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCBolzJ9sS84PbAeOsNlUt2ivr_qMxzGL8",
        authDomain: "closetify-40f35.firebaseapp.com",
        databaseURL: "https://closetify-40f35-default-rtdb.firebaseio.com",
        projectId: "closetify-40f35",
        storageBucket: "closetify-40f35.firebasestorage.app",
        messagingSenderId: "722497382860",
        appId: "1:722497382860:web:15d4e50572109d729cd569",
        measurementId: "G-JB2BLKRN7Y"
      };
    
      // ✅ Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
    
      // ✅ Attach Functions to `window` So They Are Accessible Globally
      window.showTab = function(category) {
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
        document.getElementById(category).classList.add('active');
      };
    
      window.selectItem = function(category, imageUrl) {
        let section = document.getElementById(`selected-${category}`);
        if (section) {
          section.innerHTML = `<img src="${imageUrl}" alt="${category}" />`;
        } else {
          console.error(`Section for ${category} not found.`);
        }
      };
    
      window.onload = function () {
        document.getElementById("clear-btn").addEventListener("click", function () {
          document.querySelectorAll('[id^="selected-"]').forEach(section => {
            section.innerHTML = ""; // Clear all selected categories dynamically
          });
        });
      };
    
      window.saveCanvas = function() {
        let canvasElement = document.getElementById("outfit-canvas");
    
        html2canvas(canvasElement, { backgroundColor: null }).then(canvas => {
          let image = canvas.toDataURL("image/jpeg", 1.0);
    
          let link = document.createElement("a");
          link.href = image;
          link.download = "outfit.jpg";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }).catch(error => {
          console.error("Error saving canvas:", error);
        });
      };
    
      window.showSaveOptions = function() {
        document.getElementById("save-modal").style.display = "block";
      };
    
      window.closeModal = function() {
        document.getElementById("save-modal").style.display = "none";
      };
    
      window.saveToHistory = function() {
        let outfitNameElement = document.getElementById('outfit-name'); 
    let outfitName = outfitNameElement ? outfitNameElement.textContent.trim() : ""; // Get text instead of value

    if (!outfitName || outfitName === "OUTFIT NAME") {
        alert("Please rename your outfit before saving!");
        return;
    }

    let topElement = document.getElementById('selected-top')?.querySelector('img');
    let pantsElement = document.getElementById('selected-pants')?.querySelector('img');
    let shoesElement = document.getElementById('selected-shoes')?.querySelector('img');

    let outfit = {
        outfitName: outfitName,
        top: topElement ? topElement.src : '',
        pants: pantsElement ? pantsElement.src : '',
        shoes: shoesElement ? shoesElement.src : '',
        timestamp: new Date().toISOString()
    };

    const outfitsRef = ref(database, 'outfits');
    push(outfitsRef, outfit)
        .then(() => {
            console.log("Outfit saved to Firebase!");
            
        })
        .catch((error) => {
            console.error("Error saving outfit to Firebase:", error);
        });

        window.closeModal();
      };
    
    </script>
    
 <!--- <script>
    console.log("Script Loaded! No reload yet...");
window.addEventListener("beforeunload", function () {
  console.warn("Page is about to reload...");
});
document.getElementById("imageUpload").addEventListener("change", function (event) {
  event.preventDefault();
  console.log("Upload button clicked!");
  let file = event.target.files[0];
  if (!file) return console.log("No file selected");

  let formData = new FormData();
  formData.append("image", file);

  fetch("http://127.0.0.1:5000/upload", { 
      method: "POST",
      body: formData
  })
  .then(response => response.json())
  .then(data => {
      console.log("Response:", data);
      if (data.success) {
          console.log("Image uploaded successfully!");
      } else {
          console.error("Upload failed:", data.error);
      }
  })
  .catch(error => {
      console.error("Upload error:", error);
  });
});



  </script>-->
    
  
</body></html>