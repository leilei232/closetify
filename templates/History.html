<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>History</title>
    <link rel="stylesheet" href="/static/nicepage.css" media="screen">
<link rel="stylesheet" href="/static/History.css" media="screen">
    <script class="u-script" type="text/javascript" src="/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/static/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 7.7.2, nicepage.com">
    
    
    
     
    
    
    
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Aoboshi+One:400">
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="History">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
  <body style="height: 100%; margin: 0; padding: 0; background-color: #454b42;" data-path-to-root="./" data-include-products="true" class="u-body u-xl-mode" data-lang="en">
    <section class="u-clearfix u-custom-color-8 u-section-1" id="sec-ef22">
      <div class="u-clearfix u-sheet u-valign-bottom-lg u-valign-bottom-md u-valign-bottom-sm u-sheet-1">
        <a href="homepage.html"><img class="u-image u-image-contain u-image-default u-image-1" src="/static/Closetifylogo2.png" alt="" data-image-width="500" data-image-height="105" data-href="./" data-page-id="173204856" title="Homepage"></a>
        <p class="u-custom-font u-text u-text-custom-color-34 u-text-default u-text-1">OUTFIT<br>HISTORY
        </p>
      </div>
    </section>
    <section class="u-clearfix u-custom-color-9 u-section-2" id="block-1">
      <div class="u-clearfix u-sheet u-valign-middle-xl u-valign-top-lg u-valign-top-md u-valign-top-sm u-valign-top-xs u-sheet-1">
        <div class="u-container-style u-custom-color-37 u-group u-radius u-group-1">
          <div class="u-container-layout u-container-layout-1">
            <div class="u-expanded-width u-list u-list-1">
              <div  id="outfit-history" class="u-repeater u-repeater-1">
                <div  class="u-container-style u-list-item u-radius u-repeater-item u-shape-round u-list-item-1">
                  <div class="u-container-layout u-similar-container u-valign-bottom-lg u-valign-bottom-md u-valign-bottom-sm u-valign-bottom-xs u-container-layout-2">
                    <a href="Page-1.html" data-page-id="109697653" class="u-border-none u-btn u-btn-round u-button-style u-grey-60 u-radius u-btn-1" title="Page 1">Outfit 1</a>
                  </div>
                </div>
                <div id="outfit-2" class="u-container-style u-list-item u-radius u-repeater-item u-shape-round u-list-item-2">
                  <div class="u-container-layout u-similar-container u-valign-bottom-lg u-valign-bottom-md u-valign-bottom-sm u-valign-bottom-xs u-container-layout-3">
                    <a href="Page-1.html" data-page-id="109697653" class="u-border-none u-btn u-btn-round u-button-style u-grey-60 u-radius u-btn-2" title="Page 1">Outfit 2</a>
                  </div>
                </div>
                <div id="outfit-3" class="u-container-style u-list-item u-radius u-repeater-item u-shape-round u-list-item-3">
                  <div class="u-container-layout u-similar-container u-valign-bottom-lg u-valign-bottom-md u-valign-bottom-sm u-valign-bottom-xs u-container-layout-4">
                    <a href="Page-1.html" data-page-id="109697653" class="u-border-none u-btn u-btn-round u-button-style u-grey-60 u-radius u-btn-3" title="Page 1">Outfit 3</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div id="deleteModal" class="modal">
      <div class="modal-content">
        <p style="font-size: larger;">Are you sure you want to delete this outfit?</p>
        <button class="modal-button2" onclick="confirmDelete()">Yes, delete</button>
        <button class="modal-button" onclick="closeModal()">Cancel</button>
      </div>
    </div>
    

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
      import { getDatabase, ref, get, remove } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js"; // ✅ include `remove`
    
      // Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyCBolzJ9sS84PbAeOsNlUt2ivr_qMxzGL8",
        authDomain: "closetify-40f35.firebaseapp.com",
        databaseURL: "https://closetify-40f35-default-rtdb.firebaseio.com",
        projectId: "closetify-40f35",
        storageBucket: "closetify-40f35.firebasestorage.app",
        messagingSenderId: "722497382860",
        appId: "1:722497382860:web:15d4e50572109d729cd569",
        measurementId: "G-JB2BLKRN7Y"
      };
    
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
    
      // Load outfits on page load
      window.onload = function () {
        const outfitsRef = ref(database, 'outfits');
        get(outfitsRef).then((snapshot) => {
          if (snapshot.exists()) {
            const outfits = snapshot.val();
            displayOutfits(outfits);
          } else {
            console.log("No outfits found.");
          }
        }).catch((error) => {
          console.error("Error fetching outfits:", error);
        });
      };
    
      // Display outfits
      function displayOutfits(outfits) {
        const outfitHistoryElement = document.getElementById('outfit-history');
        outfitHistoryElement.innerHTML = ''; // Clear previous
    
        let count = 1;
        for (let key in outfits) {
          if (count > 3) break;
    
          const outfit = outfits[key];
          const outfitName = outfit.outfitName || `Outfit ${count}`;
    
          const outfitElement = document.createElement('div');
          outfitElement.classList.add('u-container-style', 'u-list-item', 'u-radius', 'u-repeater-item', 'u-shape-round');
          outfitElement.id = key; // Set the unique ID for each outfit element
          outfitElement.innerHTML = `
            <div class="outfit-container">
              <button class="delete-button" onclick="openDeleteModal('${key}')">×</button>
              <h3 class="outfit-title">${outfitName}</h3>
              <div class="outfit-section">
                <div class="outfit-box">
                  <p>Top</p>
                  <img src="${outfit.top}" alt="Top" class="outfit-img">
                </div>
                <div class="outfit-box">
                  <p>Bottom</p>
                  <img src="${outfit.pants}" alt="Bottom" class="outfit-img">
                </div>
                <div class="outfit-box">
                  <p>Shoes</p>
                  <img src="${outfit.shoes}" alt="Shoes" class="outfit-img">
                </div>
              </div>
              <p class="timestamp">Saved: ${new Date(outfit.timestamp).toLocaleString()}</p>
            </div>
          `;
    
          outfitHistoryElement.appendChild(outfitElement);
          count++;
        }
      }
    
      // Show delete modal
      let outfitKeyToDelete = null;
      window.openDeleteModal = function(key) {
        outfitKeyToDelete = key;
        document.getElementById('deleteModal').style.display = 'block';
      };
    
      // Close delete modal
      window.closeModal = function() {
        document.getElementById('deleteModal').style.display = 'none';
        outfitKeyToDelete = null;
      };
    
      // Confirm deletion
      window.confirmDelete = function() {
        if (outfitKeyToDelete) {
          const outfitRef = ref(database, 'outfits/' + outfitKeyToDelete);
          
          remove(outfitRef).then(() => {
            console.log("Outfit deleted.");
            
            // Refresh the page after successful deletion to update the list
            location.reload(); // Page will refresh and outfits will be reloaded without the deleted one
    
          }).catch((error) => {
            console.error("Error deleting outfit:", error);
          });
        }
      };
    </script>
    
    

    <style>
      #deleteModal {
    display: none; /* Hide by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 200%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
    padding-top: 200px; /* Space from the top */
    padding-left: 100%; /* Center horizontally */
    transform: translateX(-50%); /* Center horizontally */
  }
  .modal-content {
    background-color: #4d4d4d;
    margin: auto;
    padding: 35px;
   color: white;
    width: 400px; /* Adjust the width to make it smaller */
    border-radius: 10px; /* Optional: round corners */
    text-align: center;
  }

  /* Button styles */
  .modal-button {
    background-color: #323c2c;
  margin: 10px;
  padding: 10px 20px;
  border-radius: 10px;
  border: 0px;
  cursor: pointer;
  font-family: Aoboshi One;
  }
  .modal-button2 {
    background-color: #323c2c;
  margin: 10px;
  padding: 10px 20px;
  border-radius: 10px;
  border: 0px;
  cursor: pointer;
  font-family: Aoboshi One;
  }
  .modal-button:hover {
    background-color: #2b3326;
  }
  .modal-button2:hover {
    background-color: #860404;
  }

.delete-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  background-color: red;
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
}
      .delete-button {
  position: absolute;
  top: 10px;
  right: 10px;
  background: red;
  color: white;
  border: none;
  font-size: 18px;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  cursor: pointer;
}
   .delete-btn {
  position: absolute;
  top: 8px;
  right: 12px;
  background-color: #ff4d4d;
  color: white;
  border: none;
  font-size: 16px;
  padding: 2px 8px;
  cursor: pointer;
  border-radius: 50%;
}
.delete-btn:hover {
  background-color: #ff1a1a;
}


      p{
        font-family: Aoboshi One;
      }
      h3{
        font-family: Aoboshi One;
      }
        .outfit-container {
            
            padding: 15px;
            margin: 15px;
            border-radius: 10px;
            background: #666666;
            text-align: center;
        }
        .outfit-section {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .outfit-box {
            width: 30%;
            text-align: center;
        }
        .outfit-img {
            width: 100px;
            height: auto;
            margin-top: 5px;
        }
        .timestamp {
            font-size: 12px;
            color: white;
            font-family: Aoboshi One;
        }
    </style>

</body>
    
    
    
    
    
  
</body></html>